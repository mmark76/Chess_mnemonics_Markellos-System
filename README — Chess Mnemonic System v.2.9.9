README — Chess Mnemonic System v.2.10 (SAN / PAO / ASSOCIATIONS - Tables)

Σκοπός: Η εφαρμογή μετατρέπει PGN/SAN παρτίδες σε τρεις συγχρονισμένους πίνακες: SAN, PAO και Associations. Η έκδοση v.2.10 ενεργοποιεί πλήρως τη λογική που γεμίζει και «δουλεύει» τον πίνακα Associations (δυναμική μεταφορά ταυτοτήτων ανά κίνηση), βελτιώνει τη διάταξη UI και προβάλλει το libraries.json.

1) Αρχεία & Προαπαιτούμενα
pgn_import_standard_v2.10.html — Το βασικό HTML/JS της εφαρμογής.
libraries.json — Οι 7 βιβλιοθήκες (Library1..Library8) με loci, PAO, associations και τετράγωνα.
chess.min.js 0.10.3 — Parser/μηχανή SAN & FEN (φορτώνεται από CDN).
Προτεινόμενος φάκελος: το pgn_import_standard_v2.10.html στην ίδια ρίζα με το libraries.json (ώστε το fetch('libraries.json') να λειτουργεί).

2) Γρήγορη εκκίνηση
Άνοιξε το pgn_import_standard_v2.10.html σε browser.
Επικόλλησε PGN/SAN στο textarea ή φόρτωσε αρχείο μέσω «Import PGN / SAN».
Πάτα «Parse PGN / SAN». Θα γεμίσουν οι πίνακες SAN, PAO και Associations (με πλήρη συγχρονισμό γραμμών).

3) Ροή δεδομένων (overview)
Φόρτωση βιβλιοθηκών: libraries.json → αντικείμενο libraries διαθέσιμο παντού.
Parsing κινήσεων: Chess().load_pgn(..., {sloppy:true}) → history({verbose:true}).
Κατασκευή movesData (μία εγγραφή ανά ημικίνηση): index, movePair, moveNumDisplay, san, side, piece, from, to, fen.
Γέμισμα πινάκων:
SAN Table: βασικά πεδία + FEN μετά από κάθε ημικίνηση.
PAO Table: κωδικός P+A+O και πρόταση (Library7), αγκίστρωση σε Locus (Library1).
Associations Table: δυναμικές «ετικέτες» κομματιών (Library5) που μετακινούνται από from → to, με περιγραφή τετραγώνου από (Library6).

4) SAN Table (τι εμφανίζει)
Στήλες: # (1., 1... κ.ο.κ.), SAN, Side, Piece, To, FEN.
Παράγει FEN μετά από κάθε ημικίνηση για αναπαραγωγή/έλεγχο.
Χρησιμοποιείται ως «κοινό ρολόι» για συγχρονισμό με PAO/Associations.

5) PAO Table — πώς υπολογίζεται
Από το SAN εντοπίζεται: piece, to (file, rank), color.
Δημιουργείται κωδικός: P (από είδος κομματιού) + file(a→1..h→8) + rank(1..8).
Library7:
Persons[P], Actions[file], Objects[rank] → συνδυαστική πρόταση/εικόνα.
Locus (Library1): για κάθε ημικίνηση, ο δείκτης locus είναι ((movePair - 1) % L1Count) + 1 (κυκλικά).
Ειδικός χειρισμός εμφάνισης «ευαίσθητων» κωδικών (π.χ. 666) μπορεί να γίνει UI-wise (π.χ. εμφάνιση SAN-like Kf6), χωρίς να μεταβάλλεται ο raw κωδικός στα δεδομένα.

6) Associations Table — πλήρης λογική (v.2.10)
6.1 Είσοδοι/Βιβλιοθήκες
Library1: 1..N loci για αγκύρωση ανά ημικίνηση (εμφανίζεται στη στήλη Locus).
Library5: ορισμός ταυτοτήτων/ετικετών για κομμάτια/πιόνια. Υποστηρίζει:
Γενικά κλειδιά ανά κομμάτι: P, N, B, R, Q, K.
Εξειδικευμένα κλειδιά "piece+square": π.χ. Pe2, Nb1, Qd8 (κεφαλαίο γράμμα κομματιού + τετράγωνο χωρίς κενό).
Library6: λεξικό περιγραφών για τετράγωνα a1..h8 (εμφανίζεται στη στήλη To ως περιγραφή).
6.2 Εσωτερική κατάσταση
assocBySquare: αντικείμενο-χάρτης «τετράγωνο → ετικέτα».
Αποτυπώνει ποιος χαρακτήρας/ταυτότητα «κάθεται» σε κάθε τετράγωνο μετά από κάθε ply.
Βοηθητικό getAssocFor(u, fromSq):
Αν υπάρχει εξειδικευμένο Library5[u+fromSq], χρησιμοποίησέ το (π.χ. Pe2).
Αλλιώς αν υπάρχει γενικό Library5[u], χρησιμοποίησέ το (π.χ. P).
Αλλιώς, fallback σε ονομασία κομματιού (π.χ. «Στρατιώτης», «Ίππος», κ.λπ.).
6.3 Βήμα-βήμα για κάθε ημικίνηση
Έστω m η τρέχουσα κίνηση (με πεδία san, side, piece, from, to, movePair).

Locus: Υπολόγισε idx κυκλικά πάνω στα διαθέσιμα Library1 και διάβασε locus (εμφανίζεται ως idx — <όνομα>).
Έυρεση/Δημιουργία ετικέτας κομματιού:
Αν υπάρχει ήδη assocBySquare[m.from], πάρε αυτήν (η ετικέτα «ταξιδεύει» με το ίδιο κομμάτι).
Αλλιώς, δημιούργησε νέα από getAssocFor(u=m.piece.toUpperCase(), m.from).
Άδειασμα τετραγώνου from: delete assocBySquare[m.from].
Ειδική περίπτωση — ροκέ:
Αν SAN ξεκινά με O-O ή O-O-O, υπολόγισε rookFrom/rookTo (ανάλογα με μακρύ/σύντομο και χρώμα).
Μετακίνησε και την ετικέτα του Πύργου:
Αν υπάρχει assocBySquare[rookFrom], μεταφορά σε rookTo.
Αλλιώς, δημιούργησε νέα με getAssocFor('R', rookFrom) και τοποθέτησέ την στο rookTo.
Τοποθέτηση στο to: assocBySquare[m.to] = pieceAssoc.
Αυτό αντικαθιστά ό,τι υπήρχε εκεί (δηλ. capture = αντικατάσταση ετικέτας στόχου).
Περιγραφή τετραγώνου: toDesc = Library6[m.to] ?? m.to.
Εγγραφή πίνακα:
Στήλες: #, SAN, Side, Locus, Piece (= association label), To (= περιγραφή τετραγώνου).
6.4 Τι σημαίνει «η ετικέτα ταξιδεύει»
Η ίδια φράση/όνομα που αντιστοιχίστηκε στο κομμάτι στο πρώτο του τετράγωνο, παραμένει το ίδιο και ακολουθεί το κομμάτι σε όλα τα επόμενα τετράγωνα.
Έτσι, κάθε παίκτης «βλέπει» το παιχνίδι σαν πρόσωπα που κινούνται πάνω σε σταθερό σκηνικό (Library6).
6.5 Κλειδιά Library5 — παραδείγματα
{
  "Library5": {
    "P": "Ο Στρατιώτης",
    "N": "Ο Ιππότης",
    "B": "Ο Αξιωματικός",
    "R": "Ο Πύργος",
    "Q": "Η Βασίλισσα",
    "K": "Ο Βασιλιάς",
  }
}
Αν υπάρχει εξειδικευμένο κλειδί (π.χ. Pe2), αυτό έχει προτεραιότητα όταν το κομμάτι ξεκινά από εκεί.
Αν δεν υπάρχει, χρησιμοποιείται το γενικό P/N/…
Αν ούτε αυτό υπάρχει, εμφανίζεται fallback ονομασία ανά είδος κομματιού.
6.6 Γνωστοί περιορισμοί & σημειώσεις (v.2.10)
En passant: Δεν αφαιρείται ρητά η ετικέτα στο τετράγωνο του «αφανώς» συλληφθέντος πιονιού. Προτεινόμενη μελλοντική βελτίωση: ελέγχεις move.flags και καθαρίζεις το τετράγωνο του captured pawn.
Προαγωγές: Η ετικέτα παραμένει αυτή του πιονιού. Προτεινόμενη βελτίωση: όταν move.promotion υπάρχει, αντικατάσταση ετικέτας με getAssocFor(<νέο κομμάτι>, m.to).
Αρχική κατάσταση: Οι ετικέτες δημιουργούνται «κατά ζήτηση» στην πρώτη κίνηση ενός κομματιού (δεν χρειάζεται αρχική σάρωση FEN).
7) UI/UX — τι αλλάζει στην v.2.10
Διάταξη: Ο πίνακας SAN πλήρους πλάτους· από κάτω δίπλα-δίπλα PAO και Associations.
Προεπισκόπηση libraries.json: «Εμφάνιση Βιβλιοθηκών (Llibraries.json)» με live JSON preview.
Κουμπιά:
Import PGN / SAN (φόρτωση αρχείου),
Parse PGN / SAN (parse από το textarea),
Καθαρισμός.
Συγχρονισμός γραμμών: hover/click σε μία γραμμή φωτίζει την αντίστοιχη σε όλους τους πίνακες.
Υποσέλιδο: Chess Mnemonic System v.2.10 @Markellos Markides 2025.
8) Αποσφαλμάτωση & συμβουλές
Αν το libraries.json δεν φορτώσει, θα εμφανιστεί σχετικό μήνυμα. Έλεγξε διαδρομή και CORS.
Έλεγξε ότι το PGN είναι έγκυρο. Η επιλογή {sloppy:true} καλύπτει αρκετές ατέλειες αλλά όχι όλες.
Για δικές σου λίστες/ονόματα, τροποποίησε Library5/6/7 στο JSON — δεν χρειάζεται αλλαγή στον κώδικα.
9) Πνευματικά

Chess Mnemonic System v.2.10 @Markellos Markides 2025. Χρήση για προσωπική μελέτη και πειραματισμό.
