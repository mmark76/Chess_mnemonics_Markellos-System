# README — Chess PGN → SAN / FEN / PAO (Baseline v2.5)

**Σημείωση:** Αυτό το έγγραφο περιγράφει το πλήρες baseline για την έκδοση **v2.5**. Περιλαμβάνει οδηγίες χρήσης, την αναλυτική λογική δημιουργίας του PAO πίνακα, τις 7 βιβλιοθήκες και τις 10 βασικές PAO προτάσεις.

---

## 1. Σκοπός
Αυτό το project μετατρέπει παρτίδες σκακιού σε:
- **SAN πίνακα** με ανάλυση ανά ημικίνηση και FEN μετά από κάθε βήμα.
- **PAO πίνακα** που κωδικοποιεί κάθε ημικίνηση σε εικόνα τύπου PAO (Person–Action–Object).
- **Associations πίνακα** που δίνει σταθερές ταυτότητες στα κομμάτια και τις μετακινήσεις τους.

Το baseline **v2.5** είναι η ολοκληρωμένη και σταθερή έκδοση που χρησιμοποιεί το `libraries.json` για όλα τα mappings.

---

## 2. Αρχεία
- **`chess.min.js`**: Μηχανή για parsing PGN / SAN και παραγωγή FEN.
- **`libraries.json`**: Όλες οι βιβλιοθήκες (Library1..Library7) με loci, pegs, PAO πίνακες και associations.
- **`pgn_import_standard_v2.5.html`**: HTML/JS εφαρμογή που συνδέει τα παραπάνω και παράγει τους 3 πίνακες.

---

## 3. Γρήγορη χρήση
1. Άνοιξε το `pgn_import_standard_v2.5.html` σε browser.
2. Επικόλλησε PGN στο textarea ή φόρτωσε `.pgn` αρχείο.
3. Πάτησε **Parse Game** — θα εμφανιστούν οι πίνακες SAN, PAO και Associations (το τελευταίο ως placeholder/δυναμικό αν το ενεργοποιήσεις).

---

## 3.1 SAN Table (τι εμφανίζει)
- Εμφανίζει όλες τις κινήσεις **ply-by-ply** (κάθε ημικίνηση ξεχωριστά).
- Στήλες:
  - **#**: Αριθμός ημικίνησης (εμφάνιση `1` για λευκά, `...1` για τις μαύρες του ίδιου γύρου).
  - **SAN**: Η κίνηση σε Standard Algebraic Notation.
  - **Χρώμα**: Λευκά / Μαύρα.
  - **Κομμάτι**: Το κομμάτι που κινείται (P,N,B,R,Q,K).
  - **Προορισμός**: Το τετράγωνο στο οποίο πηγαίνει (π.χ. e4).
  - **FEN**: Η πλήρης θέση μετά από την εκτέλεση της ημικίνησης (για κάθε ply).

Σημείωση: το SAN table λειτουργεί ως record/replay — το ίδιο replay χρησιμοποιείται για να υπολογιστεί ο PAO κωδικός για κάθε ημικίνηση.

---

## 3.2 PAO Table — αναλυτική περιγραφή δημιουργίας
Ο πίνακας **PAO** μετατρέπει κάθε ημικίνηση σε έναν **τριψήφιο κωδικό** P+A+O και δημιουργεί μια εικόνα/φράση για απομνημόνευση.

**Βήμα-βήμα δημιουργίας της εγγραφής PAO για κάθε ply:**

1. **Λήψη SAN**
   - Από το PGN λαμβάνεται η SAN κίνηση (π.χ. `Nf3`).

2. **Replay & εξαγωγή δεδομένων**
   - Με `new Chess()` και `move(san)` παίρνουμε το αντικείμενο `move` (που περιέχει `piece`, `to`, `color`, κλπ.).

3. **Μετατροπή σε ψηφία (P, A, O)**
   - **P (πρώτο ψηφίο)**: είδος κομματιού, από το mapping της **Library3** (Pawn=1, Knight=2, Bishop=3, Rook=4, Queen=5, King=6, Capture=7, Check=8, Mate=9, Castling=0).
   - **A (δεύτερο ψηφίο)**: file του προορισμού (a→1 … h→8).
   - **O (τρίτο ψηφίο)**: rank του προορισμού (1–8).
   - Παράδειγμα: `Nf3` → P=2, A=6, O=3 → κωδικός `263`.

4. **Ειδική μάσκα (ευαίσθητος κωδικός)**
   - Αν p===6 && a==='6' && o==='6' (King @ f6 → raw `666`), τότε **στο UI** ο κωδικός **δεν** εμφανίζεται ωμός, αλλά ως SAN-like (`Kf6`).
   - Εσωτερικά (λογική/exports) ο raw κωδικός παραμένει `666` για πληρότητα.

5. **Ανάγνωση από Library7**
   - Για κάθε ψηφίο: `P` → lookup σε `Library7.Persons`, `A` → `Library7.Actions`, `O` → `Library7.Objects`.
   - Ο συνδυασμός δίνει την τελική PAO-πρόταση (π.χ. «Ο Ιππότης κάθεται με βιβλίο»).

6. **Σχηματισμός cell content**
   - Στη μοναδική στήλη PAO εισάγεται καλά δομημένο περιεχόμενο:
     - **Κωδικός** (ή SAN-like `Kf6` αν εφαρμόζεται).
     - **P / A / O** ξεχωριστά.
     - **Πλήρης πρόταση** (παράσταση εικόνας).

**Αποτέλεσμα:** Κάθε ημικίνηση έχει μια μοναδική, εύκολα απεικονίσιμη PAO-εικόνα, έτοιμη για αποθήκευση σε loci (Library1) ή συνδυασμό με pegs (Library2).

---

## 3.3 Associations Table
- Εμφανίζει associations από τη **Library5** (όταν ενεργοποιηθεί).
- Κάθε κομμάτι έχει μια «ταυτότητα/πρόσωπο» που το συνοδεύει.
- **Δυναμική σύνδεση με FEN:** καθώς το FEN αλλάζει ανά ply, τα associations **κινoύνται μαζί με τα κομμάτια** — δηλαδή το πρόσωπο που αντιστοιχεί σε ένα κομμάτι μετακινείται στο νέο τετράγωνο.
- Σκοπός: να βλέπεις το παιχνίδι ως «πρόσωπα που ταξιδεύουν» και όχι απλώς σαν δεδομένα/ψηφία.

---

## 4. PAO Σύστημα (Library7)
- **Κωδικός** = P + file + rank.
- **Combinational 000–999**: 10 Persons × 10 Actions × 10 Objects = **1000 συνδυασμοί**.
- Σκοπός: κάθε ημικίνηση γίνεται εικόνα, όχι συμπίεση αριθμών.

### 4.1 Οι 10 θεμελιώδεις προτάσεις (Base images)
Από αυτές τις 10 βασικές προτάσεις προκύπτει όλο το combinational σύστημα:
- **000** → Ο Μάγος μεταμορφώνει με φωτιά
- **111** → Ο Στρατιώτης περπατάει με ασπίδα
- **222** → Ο Ιππότης πολεμάει με σπαθί
- **333** → Ο Επίσκοπος κηρύττει από βιβλίο
- **444** → Ο Φρουρός προστατεύει σημαία
- **555** → Η Βασίλισσα διατάζει από θρόνο
- **666** → Ο Βασιλιάς κάθεται φορώντας στέμμα
- **777** → Ο Σφαγέας χτυπάει με δόρυ
- **888** → Ο Κριτής ανακοινώνει με καμπάνα
- **999** → Ο Εκτελεστής στέκεται πάνω σε τάφο

Αυτά είναι τα «μπλοκ» που μαθαίνονται (Persons, Actions, Objects) και τα χρησιμοποιείς συνδυαστικά για να παράγεις τις 1000 εικόνες.

---

## 5. Οι 7 Βιβλιοθήκες (αναλυτικά)
Κάθε βιβλιοθήκη είναι ένα αντικείμενο μέσα στο `libraries.json` και εξυπηρετεί συγκεκριμένο ρόλο στην παραγωγή των πινάκων.

### Library1 — Home Memory Palace (1–64)
- 64 loci (τοποθεσίες) για την αποθήκευση σειρών κινήσεων ή εικόνων.
- **Χρήση:**
  - Χρησιμοποιείται ως κοινή αγκύρωση **στους 3 πίνακες** (SAN, PAO, Associations).
  - Παράδειγμα: κίνηση 1 → locus 1, κίνηση 2 → locus 2, κ.ο.κ.

### Library2 — Pegs System (1–10)
- Peg words για τους αριθμούς 1–10.
- **Ειδική χρήση:** χρησιμεύει ως αγκύρωση **για αριθμό κινήσεων** (π.χ. κάθε 7 κινήσεις βάζεις checkpoint), δηλαδή σαν checkpoints/κομβικά σημεία μέσα στο memory palace.

### Library3 — Pieces & Pawns – PAO Codes (1–10)
- Αντιστοιχίες για τα βασικά σύμβολα (P,N,B,R,Q,K,x,+,#,0-0).
- Παράγει το πρώτο ψηφίο (P) για τον PAO κωδικό.

### Library4 — PAO 00–99
- Κλασικός πίνακας PAO για 2-ψήφιους αριθμούς.
- Διατηρείται για γενική χρήση εκτός σκακιού και για πιθανά μελλοντικά features.

### Library5 — Pieces & Pawns Associations
- Δίνει **ταυτότητες / ονόματα / πρόσωπα** για κάθε κομμάτι και πιόνι (λευκό/μαύρο).
- **Κρίσιμο σημείο:** αυτά τα associations **δεν είναι σταθερά στα τετράγωνα** — μετακινούνται **μαζί με τα κομμάτια** όταν το FEN ενημερώνεται.
- **Σχέση με FEN:** το FEN δείχνει ποιο κομμάτι βρίσκεται σε κάθε τετράγωνο. Το σύστημα χρησιμοποιεί το FEN για να τοποθετήσει/μετακινήσει τα associations ανά ply, ώστε να μπορείς να βλέπεις/απομνημονεύεις κάθε κομμάτι ως πρόσωπο που κινείται.

### Library6 — Squares Palace (a1–h8)
- Σταθερές εικόνες για ΚΑΘΕ τετράγωνο (a1–h8).
- Αυτές οι εικόνες είναι μόνιμες και δεν αλλάζουν με το παιχνίδι — λειτουργούν ως σταθερό backdrop / anchor για την τοποθέτηση εικόνων.

### Library7 — Chess PAO 000–999
- Το main combinational PAO: Persons, Actions, Objects.
- Χρησιμοποιείται για την παραγωγή των φράσεων και των εικόνων που εμφανίζονται στη στήλη PAO.

---

## 6. Σημεία πρακτικής χρήσης & παραμετροποίηση
- **Αλλαγές σε mappings:** Αν θες να αλλάξεις P→αριθμό ή λέξεις, τροποποίησε `libraries.json`. Το JS διαβάζει αυτό το αρχείο κατά την εκκίνηση.
- **Masking ευαίσθητων codes:** Ο κωδικός `666` παραμένει στο JSON αλλά στο UI εμφανίζεται πάντα ως SAN-like (`Kf6`) ή ως PAO-πρόταση — έτσι διατηρείται η πληρότητα χωρίς οπτική ενοχλητικότητα.
- **Exports:** Στα exports (CSV/JSON) μπορείς να επιλέξεις αν θα εξάγεις raw κωδικούς ή display strings (π.χ. `Kf6`).

---

## 7. Παραδείγματα
- **1.e4** → SAN: `e4` (pawn) → P=1,A=5,O=4 → `154` → "Ο Στρατιώτης διατάζει με σημαία".
- **2.Nf3** → `263` → "Ο Ιππότης κάθεται με βιβλίο".
- **Kf6** (King to f6) → raw `666` (UI: `Kf6`) → "Ο Βασιλιάς κάθεται φορώντας στέμμα".

---

## 8. Τελικές Σημειώσεις
- Το σύστημα **δεν** προορίζεται για συμπίεση αριθμών (όπως οι αθλητές μνήμης). Η σχεδίαση στοχεύει στη **μετατροπή κινήσεων** σε εικόνες για απομνημόνευση παρτίδων.
- Το baseline v2.5 είναι η σταθερή έκδοση πάνω στην οποία προτείνεται να γίνουν πειράματα/βελτιώσεις (π.χ. ενεργοποίηση Library5, export options, UI toggles).

---

*Αν θες, κάνω export και σε `README.md` αρχείο στο repository σου ή/και βάζω σχόλια inline στο `libraries.json` για να σε βοηθήσω να τροποποιήσεις τις λίστες.*

